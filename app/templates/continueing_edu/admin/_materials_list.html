<div id="materials-list">
  <h2 class="title is-5">Materials</h2>
  <div id="materials-items">
    {% if materials %}
    {% for m in materials %}
    <div class="box materials-item" data-id="{{ m.id }}">
      <form method="post"
        action="{{ url_for('continuing_edu_admin.update_event_material', event_id=event.id, material_id=m.id) }}"
        hx-post="{{ url_for('continuing_edu_admin.update_event_material', event_id=event.id, material_id=m.id) }}"
        hx-target="#materials-list" hx-swap="outerHTML">
        <div class="columns">
          <div class="column is-one-quarter"><input class="input" type="number" name="order" value="{{ m.order }}">
          </div>
          <div class="column"><input class="input" name="title_en" value="{{ m.title_en }}"></div>
          <div class="column"><input class="input" name="title_th" value="{{ m.title_th }}"></div>
        </div>
        <div class="columns">
          <div class="column"><textarea class="textarea" name="description_en">{{ m.description_en or '' }}</textarea>
          </div>
          <div class="column"><textarea class="textarea" name="description_th">{{ m.description_th or '' }}</textarea>
          </div>
        </div>
        <div class="field"><input class="input" name="material_url" value="{{ m.material_url }}"></div>
        <div class="field is-grouped">
          <div class="control"><button class="button is-link" type="submit">Save</button></div>
          <div class="control">
            <button class="button is-danger" type="button"
              hx-post="{{ url_for('continuing_edu_admin.delete_event_material', event_id=event.id, material_id=m.id) }}"
              hx-target="#materials-list" hx-swap="outerHTML">Delete</button>
          </div>
          <div class="control">
            <button class="button is-light" type="button"
              hx-post="{{ url_for('continuing_edu_admin.move_material', event_id=event.id, material_id=m.id) }}"
              hx-vals='{"direction":"up"}' hx-target="#materials-list" hx-swap="outerHTML">↑</button>
            <button class="button is-light" type="button"
              hx-post="{{ url_for('continuing_edu_admin.move_material', event_id=event.id, material_id=m.id) }}"
              hx-vals='{"direction":"down"}' hx-target="#materials-list" hx-swap="outerHTML">↓</button>
          </div>
        </div>
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
      </form>
    </div>
    {% endfor %}
    {% else %}
    <p>No materials yet.</p>
    {% endif %}
  </div>
</div>
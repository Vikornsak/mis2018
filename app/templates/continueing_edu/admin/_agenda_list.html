<div id="agenda-list">
  <h2 class="title is-5">Agenda Items</h2>
  <div id="agenda-items">
  {% if agendas %}
    {% for a in agendas %}
      <div class="box agenda-item" data-id="{{ a.id }}">
        <form method="post" action="{{ url_for('continuing_edu_admin.update_event_agenda', event_id=event.id, agenda_id=a.id) }}"
              hx-post="{{ url_for('continuing_edu_admin.update_event_agenda', event_id=event.id, agenda_id=a.id) }}"
              hx-target="#agenda-list" hx-swap="outerHTML">
          <p class="mb-2"><strong>{{ a.title_en }}</strong> ({{ a.start_time }} - {{ a.end_time }})</p>
          <div class="columns">
            <div class="column"><input class="input" name="title_en" value="{{ a.title_en }}"></div>
            <div class="column"><input class="input" name="title_th" value="{{ a.title_th }}"></div>
            <div class="column is-one-quarter"><input class="input" type="number" name="order" value="{{ a.order }}"></div>
          </div>
          <div class="columns">
            <div class="column"><input class="input" type="datetime-local" name="start_time"></div>
            <div class="column"><input class="input" type="datetime-local" name="end_time"></div>
          </div>
          <div class="columns">
            <div class="column"><textarea class="textarea" name="description_en">{{ a.description_en or '' }}</textarea></div>
            <div class="column"><textarea class="textarea" name="description_th">{{ a.description_th or '' }}</textarea></div>
          </div>
          <div class="field is-grouped">
            <div class="control"><button class="button is-link" type="submit">Save</button></div>
            <div class="control">
              <button class="button is-danger" type="button"
                      hx-post="{{ url_for('continuing_edu_admin.delete_event_agenda', event_id=event.id, agenda_id=a.id) }}"
                      hx-target="#agenda-list" hx-swap="outerHTML">Delete</button>
            </div>
            <div class="control">
              <button class="button is-light" type="button" hx-post="{{ url_for('continuing_edu_admin.move_agenda', event_id=event.id, agenda_id=a.id) }}" hx-vals='{"direction":"up"}' hx-target="#agenda-list" hx-swap="outerHTML">↑</button>
              <button class="button is-light" type="button" hx-post="{{ url_for('continuing_edu_admin.move_agenda', event_id=event.id, agenda_id=a.id) }}" hx-vals='{"direction":"down"}' hx-target="#agenda-list" hx-swap="outerHTML">↓</button>
            </div>
          </div>
           <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
        </form>
      </div>
    {% endfor %}
  {% else %}
    <p>No agenda items yet.</p>
  {% endif %}
  </div>
</div>

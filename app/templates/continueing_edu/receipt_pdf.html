<html>
<head>
  <meta charset="UTF-8">
  <style>
    body { font-family: Arial, sans-serif; font-size: 12pt; }
    .header { display:flex; justify-content:space-between; align-items:center; }
    .brand { font-size: 14pt; font-weight: bold; }
    .meta { color:#666; font-size:10pt; }
    .section { margin-top: 16px; }
    .table { width: 100%; border-collapse: collapse; }
    .table th, .table td { border: 1px solid #ccc; padding: 8px; }
    .right { text-align: right; }
    .signature { height: 80px; border-bottom: 1px solid #555; width: 240px; margin-left:auto; }
    .row { display:flex; gap: 24px; }
    .col { flex:1; }
  </style>
</head>
<body>
  {% set TH = (current_lang == 'th') %}
  <div class="header">
    <div>
      <div class="brand">{{ 'คณะเทคนิคการแพทย์ มหาวิทยาลัยมหิดล' if TH else 'Faculty of Medical Technology, Mahidol University' }}</div>
      <div class="meta">{{ 'โครงการการศึกษาต่อเนื่อง' if TH else 'Continuing Education Program' }}</div>
    </div>
    <div>
      <img src="https://placehold.co/140x40?text=LOGO" alt="Logo"/>
    </div>
  </div>
  <div class="section">
    <div class="meta">{{ 'เลขที่ใบเสร็จ' if TH else 'Receipt No' }}: {{ receipt.receipt_number }} | {{ 'วันที่ออก' if TH else 'Issue Date' }}: {{ receipt.issue_date }}</div>
  </div>
  <div class="section row">
    <div class="col">
      <strong>{{ 'ผู้ชำระ' if TH else 'Billed To' }}</strong><br/>
      {{ member.full_name_en or member.username }}<br/>
      {{ member.email }}<br/>
      {{ member.address or '' }}
    </div>
    <div class="col">
      <strong>{{ 'กิจกรรม' if TH else 'Event' }}</strong><br/>
      {{ payment.event_entity.title_en or payment.event_entity.title_th }}<br/>
      {{ 'ประเภท' if TH else 'Type' }}: {{ payment.event_entity.event_type|title }}
    </div>
  </div>
  <div class="section">
    <table class="table">
      <thead>
        <tr><th>{{ 'รายละเอียด' if TH else 'Description' }}</th><th class="right">{{ 'จำนวน (บาท)' if TH else 'Amount (THB)' }}</th></tr>
      </thead>
      <tbody>
        <tr><td>{{ 'ค่าลงทะเบียน' if TH else 'Registration fee' }}</td><td class="right">{{ '%.2f'|format(payment.payment_amount or 0) }}</td></tr>
      </tbody>
      <tfoot>
        <tr><th>{{ 'รวมทั้งสิ้น' if TH else 'Total' }}</th><th class="right">{{ '%.2f'|format(payment.payment_amount or 0) }}</th></tr>
      </tfoot>
    </table>
  </div>
  <div class="section row">
    <div class="col">
      <div class="meta">{{ 'ผู้ออกใบเสร็จ' if TH else 'Issued by' }}: {{ receipt.issued_by_staff.personal_info.en_fullname if receipt.issued_by_staff and receipt.issued_by_staff.personal_info else 'System' }}</div>
    </div>
    <div class="col">
      <div class="meta right">{{ 'ลายเซ็นผู้มีอำนาจ' if TH else 'Authorized Signature' }}</div>
      <div class="signature"></div>
      <div class="meta right">{{ 'วันที่' if TH else 'Date' }}: ___________________</div>
    </div>
  </div>
</body>
</html>
